<div class="login-wrapper">
  <div class="login-card">
    <div class="login-logo">
      <img src="./assets/img/locus_logo.png" alt="Locus Logo" />
    </div>

    <form class="login-form">
      <div class="form-field">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          placeholder="Enter username"
          name="username"
          required
          minlength="5"
          [(ngModel)]="username"
          #usernameVal="ngModel"
        />
      </div>

      <div class="form-field">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          placeholder="Enter password"
          name="password"
          required
          minlength="5"
          [(ngModel)]="password"
          #passwordVal="ngModel"
          (keyup.enter)="onLogin()"
        />
      </div>

      <button type="button" class="login-btn" (click)="onLogin()">
        Sign In
      </button>
    </form>

    <!-- Validation Errors -->
    <ng-container
      *ngIf="usernameVal.errors?.['required'] && passwordVal.errors?.['required'] && (usernameVal.dirty || usernameVal.touched) && (passwordVal.dirty || passwordVal.touched); else notBothRequired"
    >
      <div class="login-error">Username and password are required.</div>
    </ng-container>
    <ng-template #notBothRequired>
      <div *ngIf="usernameVal.invalid && (usernameVal.dirty || usernameVal.touched)" class="login-error">
        <span *ngIf="usernameVal.errors?.['required']">Username is required.</span>
        <span *ngIf="usernameVal.errors?.['minlength']">Username must be at least 5 characters.</span>
      </div>
      <div *ngIf="passwordVal.invalid && (passwordVal.dirty || passwordVal.touched)" class="login-error">
        <span *ngIf="passwordVal.errors?.['required']">Password is required.</span>
        <span *ngIf="passwordVal.errors?.['minlength']">Password must be at least 5 characters.</span>
      </div>
    </ng-template>

    <!-- Server Error -->
    <div *ngIf="error_description" class="login-error">
      {{ error_description }}
    </div>
  </div>

  <footer class="login-footer">
    &copy; {{ currentDate | date : 'yyyy' }}
    <a href="https://www.locus.co.th" target="_blank">Locus Telecommunication Inc., Ltd.</a>
  </footer>
</div>
